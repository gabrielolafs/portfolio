// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider   = "prisma-client-js"
  output     = "../.prisma/client"
  engineType = "binary"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL")
}

// example table used in the express router example (to be commented out when routes and everything else has be altered / deleted)
model HighScore {
  id    Int      @id @default(autoincrement())
  time  DateTime
  score Int
}

// dont delete lower, just the high score should be removed
model Logged {
  Outfit   Outfit   @relation("Logged", fields: [outfitID], references: [outfitID])
  outfitID Int      @id
  date     DateTime
}

model Hamper {
  Piece     Piece    @relation("Dirty", fields: [pieceID], references: [pieceID])
  pieceID   Int      @id
  dateAdded DateTime
}

model Saved {
  savedID  Int    @id @default(autoincrement())
  outfitID Int    @unique
  name     String

  Outfit Outfit @relation("Saved", fields: [outfitID], references: [outfitID])
}

model Outfit {
  outfitID Int @id @default(autoincrement())
  shirtID  Int @unique
  pantsID  Int @unique

  Logged Logged? @relation("Logged")
  Saved  Saved?  @relation("Saved")

  shirt Shirt? @relation("ShirtID", fields: [shirtID], references: [pieceID])
  pants Pants? @relation("PantsID", fields: [pantsID], references: [pieceID])
}

model Piece {
  pieceID        Int      @id @default(autoincrement())
  price          Int
  wears          Int
  wearsSinceWash Int
  lastWash       DateTime

  Hamper Hamper? @relation("Dirty")

  Shirt Shirt? @relation("Shirt")
  Pants Pants? @relation("Pants")
}

model Shirt {
  Piece   Piece  @relation("Shirt", fields: [pieceID], references: [pieceID])
  pieceID Int    @id
  size    String

  Outfit Outfit? @relation("ShirtID")
}

model Pants {
  pieceID Int @id
  waist   Int

  Piece  Piece   @relation("Pants", fields: [pieceID], references: [pieceID])
  Outfit Outfit? @relation("PantsID")
}
